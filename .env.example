# Selfhosted Configuration
# Copy this file to .env and configure with your values

# =============================================================================
# REQUIRED: Base Domain Configuration
# =============================================================================

# Your main domain name - all services will use subdomains of this
# Example: if BASE_DOMAIN=example.com, services will be at service.example.com
BASE_DOMAIN=your-domain.com

# Wildcard domain for SSL certificate generation
# This should match your BASE_DOMAIN with a wildcard prefix
WILDCARD_DOMAIN=*.your-domain.com

# =============================================================================
# REQUIRED: Cloudflare DNS Configuration
# =============================================================================
# Required for automatic SSL certificate generation via DNS challenge
# Get these from your Cloudflare account: https://dash.cloudflare.com/profile/api-tokens

# Option 1: API Token (Recommended - more secure)
CF_Token=your_cloudflare_api_token_here

# Option 2: Email + API Key (Legacy)
# CF_Email=your-email@example.com
# CF_Key=your_global_api_key_here

# =============================================================================
# OPTIONAL: Docker User Configuration
# =============================================================================
# Set these to match your user to avoid permission issues with mounted volumes
# Run: id $(whoami) to get your values

# Your user ID
UID=1000

# Your group ID
GID=1000

# =============================================================================
# OPTIONAL: SSH Configuration
# =============================================================================
# Used for Docker Swarm multi-node deployments and Kiwix NAS setup

# SSH key file for remote access (default: ~/.ssh/selfhosted_rsa)
SSH_KEY_FILE=~/.ssh/id_rsa

# SSH connection timeout in seconds
# SSH_TIMEOUT=5

# =============================================================================
# OPTIONAL: Volume Configuration
# =============================================================================
# Configure data storage paths for services
# Default paths assume you have external storage mounted at /media/external

# Media storage path (for Emby, PhotoPrism, etc.)
# MEDIA_ROOT=/media/external

# Downloads path (for torrents, etc.)
# DOWNLOADS_ROOT=/mnt/app_data/downloads

# =============================================================================
# ACME/SSL CONFIGURATION
# =============================================================================
# Email for Let's Encrypt certificate registration
ACME_EMAIL=your-email@example.com

# =============================================================================
# NETWORK INFRASTRUCTURE
# =============================================================================
# NAS server hostname/IP for SMB/CIFS volumes and SSH access
NAS_SERVER=nas.your-domain.com

# NAS SSH username (used by Kiwix setup script)
NAS_USER=admin

# Local network subnet (for VPN container firewall - allows local network access)
# Example: 192.168.1.0/24 or 10.0.0.0/8
LOCAL_SUBNET=192.168.1.0/24

# =============================================================================
# STORAGE & NETWORK CREDENTIALS
# =============================================================================
# SMB/CIFS storage credentials for network volumes
# These are used across multiple services for shared storage access
SMB_USERNAME=your_smb_username
SMB_PASSWORD=your_secure_smb_password
SMB_DOMAIN=your_domain

# =============================================================================
# DATABASE CREDENTIALS
# =============================================================================
# PhotoPrism database credentials
PHOTOPRISM_ADMIN_PASSWORD=your_secure_photoprism_admin_password
PHOTOPRISM_DB_PASSWORD=your_secure_photoprism_db_password
MARIADB_ROOT_PASSWORD=your_secure_mariadb_root_password

# Immich database credentials
IMMICH_DB_PASSWORD=your_secure_immich_db_password
IMMICH_DB_USERNAME=postgres
IMMICH_DB_DATABASE_NAME=immich
IMMICH_VERSION=release

# LibreChat database
POSTGRES_PASSWORD=your_secure_postgres_password

# =============================================================================
# BACKUP CONFIGURATION (Kopia)
# =============================================================================
# Kopia backup system credentials for both NAS and Swarm instances

# Repository password (used to encrypt/decrypt backup data in Backblaze B2)
KOPIA_PASSWORD=your_secure_kopia_repository_password

# Web UI authentication
KOPIA_SERVER_USERNAME=admin
KOPIA_SERVER_PASSWORD=your_secure_kopia_server_password

# =============================================================================
# MONITORING & ADMIN INTERFACES
# =============================================================================
# Grafana admin credentials
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_admin_password

# =============================================================================
# DNS SERVER CONFIGURATION
# =============================================================================
# Technitium DNS Server admin password
DNS_ADMIN_PASSWORD=your_secure_dns_admin_password

# DNS server upstream forwarders (comma-separated)
# Recommended: Cloudflare DNS (1.1.1.1,1.0.0.1) or Quad9 (9.9.9.9,149.112.112.112)
DNS_SERVER_FORWARDERS=1.1.1.1,1.0.0.1

# =============================================================================
# SERVICE API KEYS (for Homepage widgets)
# =============================================================================
# Media Services API Keys
EMBY_API_KEY=your_emby_api_key
SONARR_API_KEY=your_sonarr_api_key
RADARR_API_KEY=your_radarr_api_key
PROWLARR_API_KEY=your_prowlarr_api_key
PROFILARR_API_KEY=your_profilarr_api_key

# FlareSolverr Configuration
FLARESOLVERR_LOG_LEVEL=info

# Torrent Client Credentials
QBIT_USERNAME=admin
QBIT_PASSWORD=your_qbittorrent_web_ui_password
DELUGE_PASSWORD=your_deluge_web_ui_password

# Usenet Client Credentials
SABNZBD_API_KEY=your_sabnzbd_api_key
NZBGET_USERNAME=nzbget
NZBGET_PASSWORD=your_nzbget_password

# NordVPN Configuration (for downloads VPN container)
NORDVPN_USER=your_nordvpn_email@example.com
NORDVPN_PASS=your_nordvpn_password

# Smart Home
HASS_TOKEN=your_homeassistant_long_lived_access_token

# =============================================================================
# TIMEZONE CONFIGURATION
# =============================================================================
# Timezone for services (optional)
# Example: America/New_York, Europe/London, Asia/Tokyo
# See: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=UTC

# =============================================================================
# AI/LLM API KEYS (for LibreChat)
# =============================================================================
GROQ_API_KEY=your_groq_api_key
MISTRAL_API_KEY=your_mistral_api_key
OPENROUTER_KEY=your_openrouter_api_key
PORTKEY_API_KEY=your_portkey_api_key
PORTKEY_OPENAI_VIRTUAL_KEY=your_portkey_virtual_key
TTS_API_KEY=your_text_to_speech_api_key
STT_API_KEY=your_speech_to_text_api_key

# =============================================================================
# CONTAINER REGISTRY (for Docker Swarm)
# =============================================================================
# Container registry configuration for multi-node deployments
# Docker Swarm requires images to be pulled from a registry

# Registry URL - Options:
#   - GitHub Container Registry: ghcr.io
#   - Docker Hub: docker.io (or leave empty)
#   - Private Registry: registry.your-domain.com
REGISTRY_URL=ghcr.io

# Registry namespace (your GitHub username or Docker Hub username)
REGISTRY_NAMESPACE=your-github-username

# Default image tag for deployments
IMAGE_TAG=latest

# =============================================================================
# GITHUB CONTAINER REGISTRY CREDENTIALS (SENSITIVE - DO NOT COMMIT)
# =============================================================================
# Option 1: Add to .env (if .env is in .gitignore - RECOMMENDED)
# Option 2: Export as environment variables (MORE SECURE):
#   export GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#   export GITHUB_USERNAME=your-github-username
#
# To generate token: https://github.com/settings/tokens
# Required scopes: write:packages, read:packages, delete:packages

# GitHub username (same as REGISTRY_NAMESPACE for ghcr.io)
GITHUB_USERNAME=your-github-username

# GitHub Personal Access Token (generate at https://github.com/settings/tokens)
# ⚠️  IMPORTANT: This is sensitive! Ensure .env is in .gitignore
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# AUTHENTIK (Identity Provider)
# =============================================================================
# Database password for Authentik PostgreSQL
AUTHENTIK_POSTGRES_PASSWORD=your_secure_authentik_db_password

# Secret key for Authentik (generate with: openssl rand -base64 36)
AUTHENTIK_SECRET_KEY=your_authentik_secret_key

# Outpost tokens (generated in Authentik UI after creating outposts)
# Leave empty initially, then update after creating each outpost
AUTHENTIK_OUTPOST_TOKEN=
AUTHENTIK_LDAP_TOKEN=

# -----------------------------------------------------------------------------
# OIDC Client Credentials (create these in Authentik for each application)
# For each app: Applications > Providers > Create OAuth2/OpenID Provider
# -----------------------------------------------------------------------------

# Grafana OIDC (slug: grafana)
GRAFANA_OAUTH_CLIENT_ID=
GRAFANA_OAUTH_CLIENT_SECRET=

# Immich OIDC (slug: immich)
IMMICH_OAUTH_CLIENT_ID=
IMMICH_OAUTH_CLIENT_SECRET=

# Mealie OIDC (slug: mealie)
MEALIE_OAUTH_CLIENT_ID=
MEALIE_OAUTH_CLIENT_SECRET=

# Vaultwarden OIDC (slug: vaultwarden)
VAULTWARDEN_OAUTH_CLIENT_ID=
VAULTWARDEN_OAUTH_CLIENT_SECRET=

# Forgejo OIDC (slug: forgejo) - optional
FORGEJO_OAUTH_CLIENT_ID=
FORGEJO_OAUTH_CLIENT_SECRET=

# =============================================================================
# FORGEJO (Git Service)
# =============================================================================
# Forgejo version tag (see https://codeberg.org/forgejo/forgejo/releases)
FORGEJO_VERSION=10-rootless

# SSH Port for Git operations (must be exposed on firewall)
FORGEJO_SSH_PORT=2222

# Database credentials
FORGEJO_DB_USER=forgejo
FORGEJO_DB_PASSWORD=your_secure_forgejo_db_password
FORGEJO_DB_NAME=forgejo

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Never commit the actual .env file to version control
# 2. Use strong, unique passwords for all services
# 3. Regularly rotate API tokens and certificates
# 4. Consider using Docker secrets for production deployments
# 5. Ensure your domain's DNS points to your server
# 6. Generate random passwords: openssl rand -base64 32
